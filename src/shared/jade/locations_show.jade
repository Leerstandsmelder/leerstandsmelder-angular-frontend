include mixins/_form
include mixins/_media
include mixins/_buttons
include mixins/_layout
include mixins/_style

md-content(layout="row" layout-wrap layout-fill)
    #map(lsm-map flex="33" ng-model='location' urlbase='urlbase' center='mapcenter' zoom='zoom' locations='locations')
    md-content.md-padding(flex)
        p.pull-right(ng-if='mayEdit')
            +button_fab('actions.edit','edit()','md-primary','fa-edit','location')

        p
            strong {{location.title}}
        p.metatext
            | {{ 'author.by' | translate }}&nbsp;
            strong {{ location.user.nickname }}&nbsp;
            span {{ 'author.on' | translate }} {{ location.created | date : 'dd.MM.yy' }}
        div(layout="row" ng-if="photos.length > 0")
            img.photo-preview(ng-repeat="photo in photos" ng-src="{{ photo.thumb_url }}" lightbox)
        p(ng-if="location.description")
            small {{location.description}}

        hr
        small
            p(ng-if="location.empty_since") {{ 'locations.empty_for' | translate }} {{ location.emptySince }}
            p {{ 'locations.address' | translate }}: {{location.street || ('locations.unknown' | translate)}}
            p {{ 'locations.city' | translate }}: {{location.postcode}} {{location.city || ('locations.unknown' | translate)}}
            p {{ 'locations.degree' | translate }}: {{(location.degree | translate) || ('locations.unknown' | translate)}}
            p {{ 'locations.demolition_rumor' | translate }}: {{(location.rumor | translate) || ('locations.unknown' | translate)}}
            p {{ 'locations.building_type' | translate }}: {{(location.buildingType | translate) || ('locations.unknown' | translate)}}
            p {{ 'locations.owner' | translate }}: {{(location.owner | translate) || ('locations.unknown' | translate)}}
        hr
        p
            strong {{ 'comments.comment_plural' | translate }}
        div(ng-if="location.comments" ng-repeat="comment in location.comments")
            p.smalltext
                | {{ 'author.by' | translate }}&nbsp;
                strong {{ comment.user.nickname }}&nbsp;
                span {{ 'author.on' | translate }} {{ comment.created | date : 'dd.MM.yy HH:mm' }}
            p {{comment.body}}
        p(ng-if="location.comments.length === 0")
            small {{ 'comments.no_comments' | translate }}
        hr
        p
            strong {{ 'comments.new_comment' | translate }}
        +input('textarea','newComment','comments.comment_text', null, null)