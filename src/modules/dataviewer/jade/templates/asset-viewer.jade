include ../../../mixins/jade/_mixin_form
include ../../../mixins/jade/_mixin_media
include ../../../mixins/jade/_mixin_buttons
include ../../../mixins/jade/_mixin_layout
include ../../../mixins/jade/_mixin_style

md-content.md-padding
    p.pull-right(ng-if='mayEdit')
        +button_fab('actions.edit','edit()','md-primary','fa-edit','location')

    p
        strong {{location.title}}
    div(layout="row" layout-align="space-between start")
        h2(flex ng-if="photos.length === 0") {{ "locations.no_photos" | translate }}
        span(flex ng-repeat="photo in photos")
            img(ng-src="{{ photo.thumb_url }}" height="120px")
    p(ng-if="location.description")
        small {{location.description}}

    hr
    small
        p(ng-if="location.emptySinceParsed") {{ "locations.empty_for" | translate }} {{location.emptySinceParsed}}
        p {{ "locations.address" | translate }}: {{location.street || ("locations.unknown" | translate)}}
        p {{ "locations.city" | translate }}: {{location.postcode}} {{location.city || ("locations.unknown" | translate)}}
        p {{ "locations.degree" | translate }}: {{location.degree || ("locations.unknown" | translate)}}
        p {{ "locations.demolition_rumor" | translate }}: {{location.rumor || ("locations.unknown" | translate)}}
        p {{ "locations.building_type" | translate }}: {{location.buildingType || ("locations.unknown" | translate)}}
        p {{ "locations.owner" | translate }}: {{location.owner || ("locations.unknown" | translate)}}
    hr
    p
        strong {{ "comments.comment_plural" | translate }}
    div(ng-if="location.comments" ng-repeat="comment in location.comments")
        p.smalltext
            strong {{ author.by | translate }} {{ comment.user.nickname }}
            | {{ ' ' }}
            span {{ author.on | translate }} {{ comment.created | date : 'dd.MM.yy HH:mm' }}
        p {{comment.body}}
    p(ng-if="location.comments.length === 0")
        small {{ "comments.no_comments" | translate }}
    hr
    p
        strong {{ "comments.new_comment" | translate }}
    +input('textarea','comments.comment_text', null, null)
